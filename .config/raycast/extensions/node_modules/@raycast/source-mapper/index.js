"use strict";var R=Object.create;var E=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var q=Object.getOwnPropertyNames;var D=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty;var v=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var B=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of q(e))!I.call(n,o)&&o!==t&&E(n,o,{get:()=>e[o],enumerable:!(r=P(e,o))||r.enumerable});return n};var h=(n,e,t)=>(t=n!=null?R(D(n)):{},B(e||!n||!n.__esModule?E(t,"default",{value:n,enumerable:!0}):t,n));var L=v((se,j)=>{"use strict";var K=/[|\\{}()[\]^$+*?.-]/g;j.exports=n=>{if(typeof n!="string")throw new TypeError("Expected a string");return n.replace(K,"\\$&")}});var T=v((ue,k)=>{"use strict";var X=L(),Y=typeof process=="object"&&process&&typeof process.cwd=="function"?process.cwd():".",N=[].concat(require("module").builtinModules,"bootstrap_node","node").map(n=>new RegExp(`(?:\\((?:node:)?${n}(?:\\.js)?:\\d+:\\d+\\)$|^\\s*at (?:node:)?${n}(?:\\.js)?:\\d+:\\d+$)`));N.push(/\((?:node:)?internal\/[^:]+:\d+:\d+\)$/,/\s*at (?:node:)?internal\/[^:]+:\d+:\d+$/,/\/\.node-spawn-wrap-\w+-\w+\/node:\d+:\d+\)?$/);var b=class n{constructor(e){e={ignoredPackages:[],...e},"internals"in e||(e.internals=n.nodeInternals()),"cwd"in e||(e.cwd=Y),this._cwd=e.cwd.replace(/\\/g,"/"),this._internals=[].concat(e.internals,Z(e.ignoredPackages)),this._wrapCallSite=e.wrapCallSite||!1}static nodeInternals(){return[...N]}clean(e,t=0){t=" ".repeat(t),Array.isArray(e)||(e=e.split(`
`)),!/^\s*at /.test(e[0])&&/^\s*at /.test(e[1])&&(e=e.slice(1));let r=!1,o=null,c=[];return e.forEach(i=>{if(i=i.replace(/\\/g,"/"),this._internals.some(p=>p.test(i)))return;let s=/^\s*at /.test(i);r?i=i.trimEnd().replace(/^(\s+)at /,"$1"):(i=i.trim(),s&&(i=i.slice(3))),i=i.replace(`${this._cwd}/`,""),i&&(s?(o&&(c.push(o),o=null),c.push(i)):(r=!0,o=i))}),c.map(i=>`${t}${i}
`).join("")}captureString(e,t=this.captureString){typeof e=="function"&&(t=e,e=1/0);let{stackTraceLimit:r}=Error;e&&(Error.stackTraceLimit=e);let o={};Error.captureStackTrace(o,t);let{stack:c}=o;return Error.stackTraceLimit=r,this.clean(c)}capture(e,t=this.capture){typeof e=="function"&&(t=e,e=1/0);let{prepareStackTrace:r,stackTraceLimit:o}=Error;Error.prepareStackTrace=(s,p)=>this._wrapCallSite?p.map(this._wrapCallSite):p,e&&(Error.stackTraceLimit=e);let c={};Error.captureStackTrace(c,t);let{stack:i}=c;return Object.assign(Error,{prepareStackTrace:r,stackTraceLimit:o}),i}at(e=this.at){let[t]=this.capture(1,e);if(!t)return{};let r={line:t.getLineNumber(),column:t.getColumnNumber()};C(r,t.getFileName(),this._cwd),t.isConstructor()&&Object.defineProperty(r,"constructor",{value:!0,configurable:!0}),t.isEval()&&(r.evalOrigin=t.getEvalOrigin()),t.isNative()&&(r.native=!0);let o;try{o=t.getTypeName()}catch{}o&&o!=="Object"&&o!=="[object Object]"&&(r.type=o);let c=t.getFunctionName();c&&(r.function=c);let i=t.getMethodName();return i&&c!==i&&(r.method=i),r}parseLine(e){let t=e&&e.match(ee);if(!t)return null;let r=t[1]==="new",o=t[2],c=t[3],i=t[4],s=Number(t[5]),p=Number(t[6]),u=t[7],y=t[8],M=t[9],_=t[10]==="native",A=t[11]===")",m,a={};if(y&&(a.line=Number(y)),M&&(a.column=Number(M)),A&&u){let f=0;for(let l=u.length-1;l>0;l--)if(u.charAt(l)===")")f++;else if(u.charAt(l)==="("&&u.charAt(l-1)===" "&&(f--,f===-1&&u.charAt(l-1)===" ")){let F=u.slice(0,l-1);u=u.slice(l+1),o+=` (${F}`;break}}if(o){let f=o.match(te);f&&(o=f[1],m=f[2])}return C(a,u,this._cwd),r&&Object.defineProperty(a,"constructor",{value:!0,configurable:!0}),c&&(a.evalOrigin=c,a.evalLine=s,a.evalColumn=p,a.evalFile=i&&i.replace(/\\/g,"/")),_&&(a.native=!0),o&&(a.function=o),m&&o!==m&&(a.method=m),a}};function C(n,e,t){e&&(e=e.replace(/\\/g,"/"),e.startsWith(`${t}/`)&&(e=e.slice(t.length+1)),n.file=e)}function Z(n){if(n.length===0)return[];let e=n.map(t=>X(t));return new RegExp(`[/\\\\]node_modules[/\\\\](?:${e.join("|")})[/\\\\][^:]+:\\d+:\\d+`)}var ee=new RegExp("^(?:\\s*at )?(?:(new) )?(?:(.*?) \\()?(?:eval at ([^ ]+) \\((.+?):(\\d+):(\\d+)\\), )?(?:(.+?):(\\d+):(\\d+)|(native))(\\)?)$"),te=/^(.*?) \[as (.*?)\]$/;k.exports=b});var g=require("worker_threads");var d=h(require("node:fs")),S=h(require("node:path")),x=h(require("@parcel/source-map")),J=/data:application\/json[^,]+base64,/,Q=[/^node:/],U=1;function $(n,e){if(!e)return{message:n,stack:e};let t=new Map,r=0,o=e.map(i=>{if(r>=U||!i.file)return i;try{let s=t.get(i.file)??z(i.file);return s?(t.set(i.file,s),W(i,s,r===0)):i}catch{}finally{r+=1}return i}),c=e[0];return!c||typeof c.file>"u"||typeof n>"u"?{message:n,stack:o}:{message:V(n,c,t.get(c.file)),stack:o}}function V(n,e,t){let r=/^(?!\bundefined\b)\b(\w+)\b is not a function$/;if(!t||typeof e.line>"u"||typeof e.column>"u"||!r.test(n))return n;let{line:o,column:c}=e,i=t.findClosestMapping(o,c);return i?.name?n.replace(/^\b(\w+)\b/,i.name):n}function W(n,e,t){if(!n.file||!n.line||!n.column)return n;let r=e.findClosestMapping(n.line,n.column);return r?{raw:n.raw,file:S.default.resolve(S.default.dirname(n.file),r.source??""),fileContent:t&&r.source?e.getSourceContent(r.source):void 0,line:r.original?.line,column:r.original?.column,function:n.function}:n}function z(n){if(Q.some(o=>o.test(n)))return null;let e=G(n)??H(n);if(!e)return null;let t=JSON.parse(e),r=new x.default;return r.addVLQMap(t),r}function G(n){if(!d.default.existsSync(n))return null;let e=d.default.readFileSync(n).toString("utf8");if(!J.test(e))return null;let t=e.slice(e.lastIndexOf(",")+1);return Buffer.from(t,"base64").toString("utf8")}function H(n){let e=`${n}.map`;return d.default.existsSync(e)?d.default.readFileSync(e).toString("utf8"):null}var w=h(T()),ne=[/server\/index.js$/,/^node:internal\/process\/task_queues/],re=5,ie=new w.default({internals:w.default.nodeInternals()});function O(n){return n.split(`
`).slice(1,re).map(t=>{let r=ie.parseLine(t);return{raw:t,file:r?.file,line:r?.line,column:r?.column,function:r?.function}}).filter(t=>!ne.some(r=>r.test(t.file??"")))}g.parentPort?.postMessage($(g.workerData?.message,O(g.workerData?.stack)));
